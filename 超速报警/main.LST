C51 COMPILER V9.00   MAIN                                                                  05/26/2016 17:37:50 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: E:\software\DevelopmentSoftware\InstallSrc\KeilC51\C51\BIN\C51.EXE main.c COMPACT BROWSE DEBUG OBJE
                    -CTEXTEND

line level    source

   1          #include "stc15.h"
   2          #include "Timer.h"
   3          #include "Delay.h"
   4          
   5          #include "main.h"
   6          
   7          #include "LCD12864.H"
   8          #include "DHT11.h"
   9          #include "UltraSound.h"
  10          #include "DS1302.h"
  11          #include "Button.h"
  12          #include "FLASH.h"                               
  13          //#include "Wifi.h"
  14          //#include "Force.h"
  15          //#include "Camera.h"
  16          #include "UART.h"
  17          
  18          unsigned char code StrHello[]="HELLOWORLD!";
  19          unsigned char DS3231ISREADY;  
  20          unsigned char DHT11ISREADY;
  21          unsigned char ULTRAISREADY;
  22          unsigned char FASTSPEED;
  23          unsigned char BUZZERTIMER3STOP;
  24          unsigned char ISSETTING;                                                        //设置,1为设置状态 0为运行状态
  25          unsigned char EXITSETTING;                                                      //退出设置标志1为激活0为未激活
  26          
  27          unsigned char StartTime[7]=     {16,5,25,23,52,0,3};    // 年月日时分秒周 14-11-30 23:50:59   DS1302起始时间
  28          unsigned int FirstSetVelocity = 3600;                           // 初始速度阈值约为3600m/h
  29          
  30          void port_mode()            // 端口模式
  31          {
  32   1              P0M1=0x00; P0M0=0x00;P1M1=0x00; P1M0=0x00;P2M1=0x00; P2M0=0x00;P3M1=0x00; P3M0=0x00;
  33   1              P4M1=0x00; P4M0=0x00;
  34   1              //P5M1=0x00; P5M0=0x00;P6M1=0x00; P6M0=0x00;P7M1=0x00; P7M0=0x00; 
  35   1      }
  36          
  37          void main()
  38          {       
  39   1          
  40   1          //unsigned char code FUCKSTOP[]={"FUCKSTOOP!"};
  41   1              //unsigned char code FUCKSTART[]={"FUCKSTAART!"};
  42   1      
  43   1          port_mode();                                                        //端口设置全部弱上拉
  44   1      
  45   1          //DS1302ISREADY = 0;                                //DS1302未激活
  46   1          
  47   1              DHT11ISREADY = 0;                                               //DHT11未激活
  48   1              ULTRAISREADY = 0;                                               //超声波未激活,他们两个由Timer0中断激活
  49   1              FASTSPEED = 0;                                                  //超速蜂鸣器未激活
  50   1              BUZZERTIMER3STOP = 0;
  51   1          ISSETTING = 0;
  52   1              EXITSETTING = 0;
  53   1              P20 = 1;
  54   1              UltraSoundInit();                                                       //超声波初始化
C51 COMPILER V9.00   MAIN                                                                  05/26/2016 17:37:50 PAGE 2   

  55   1              SetVelocityThreshold(FirstSetVelocity,1);       //速度EEPROM初始化,可以自动识别是否初始化过
  56   1              
  57   1              //DS1302Init(StartTime);                                        //DS1302初始化,初始化一次就行了
  58   1              
  59   1              //P20 = 0;
  60   1              
  61   1              //DHT11Init();          //DHT11没有初始化程序
  62   1          //UARTInit();                       //UART初始化
  63   1          
  64   1          Delay1000ms();                      //延时3s
  65   1          Delay1000ms();   
  66   1          Lcm_Init();                         //LCD12864以及初始化
  67   1      
  68   1          Timer3Init();               //蜂鸣器定时器初始化但不开启,开启由变量FASTSPEED指示
  69   1              INT0_Init();            //按键外部中断0开启
  70   1              Timer0Init();                   //DHT11和超声波
  71   1              EA = 1;                         //使能总中断
  72   1          
  73   1      
  74   1              Display_String(1,StrHello);                                         //LCD显示HelloWorld!
  75   1              Display_String(2,StrHello);                                         //LCD显示HelloWorld!
  76   1              Display_String(3,StrHello);                                         //LCD显示HelloWorld!
  77   1              Display_String(4,StrHello);                                         //LCD显示HelloWorld!
  78   1              //P20 = 0;
  79   1              while(1)
  80   1              {       
  81   2                      /**********************设置状态*****************************/
  82   2                  if(ISSETTING == 0)                                                  
  83   2                      {
  84   3                      if(BUZZERTIMER3STOP)
  85   3                              {
  86   4                                      DisableTimer3();
  87   4                                      //Display_String(4,FUCKSTOP);
  88   4                              }
  89   3      
  90   3                              if(DHT11ISREADY)
  91   3                              {
  92   4                                      DisplayDHT11();                         //读取温度湿度传感器值
  93   4                                      DHT11ISREADY = 0;
  94   4                              }
  95   3                              else if(ULTRAISREADY)
  96   3                              {
  97   4                                      UltraSoundDisplay();                    //超声波
  98   4                                      ULTRAISREADY = 0;
  99   4                                      if(FASTSPEED)
 100   4                                      {
 101   5                                          BUZZERTIMER3STOP = 0;
 102   5                                              EnableTimer3();
 103   5                                              //Display_String(4,FUCKSTART);
 104   5                                      }
 105   4                              }
 106   3                              else if(DS3231ISREADY)
 107   3                              {
 108   4                                      DS3231read_time();
 109   4                              }
 110   3                              else ;
 111   3                              }
 112   2                      /*********************************设置状态*****************************/
 113   2                      else
 114   2                      {
 115   3                              EnterSetting();                                                          //这里设置成死循环!
 116   3                      }
C51 COMPILER V9.00   MAIN                                                                  05/26/2016 17:37:50 PAGE 3   

 117   2              }
 118   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    193    ----
   CONSTANT SIZE    =     12    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =     16    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
